@page "/dashboard"
@using TCH.WebServer.Models
@using TCH.WebServer.Services.Products
@inject NavigationManager navigationManager
@inject IProductService productServices

<div class="fluid d-flex">
    <div class="col-12 col-lg-9 d-flex p-2">
        <div class="row">
            @if(ProductsList != null)
            {
                foreach(var product in ProductsList)
                {
                    <div class="col-12 col-sm-6 col-md-3 ">
                       <ProductComponent product = "@product" ></ProductComponent>
                    </div>
                }
            }
            else
            {
                <div class="spinner"></div>
            }
        </div>
    </div>
    <div class="pt-2" style="position:fixed; right: 2em; width: 300px">
        <div class="flex-grow-1 card">
            <div class="card-header pt-2" style="min-height: 0 !important;">
                <div class="card-title w-100">
                    <h2 class="text-center w-100 text-primary">
                        Đơn Hàng
                    </h2>
                </div>
            </div>
            <!--begin::Table-->
            <div class="card-body" style="padding: 1rem">
                <div class="table-responsive border-bottom mb-9">
                    <table class="table mb-3">
                        <thead>
                            <tr class="border-bottom fs-6 fw-bolder text-muted">
                                <th class="min-w-175px pb-2">Tên</th>
                                <th class="min-w-70px text-end pb-2">Số lượng</th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr class="fw-bolder text-gray-700 fs-5 text-end">
                                <td class="d-flex align-items-center pt-6">
                                    Trà Đào Cam Sả (L)
                                </td>
                                <td class="pt-6">3</td>
                               
                            </tr>
                            <tr class="fw-bolder text-gray-700 fs-5 text-end">
                                <td class="d-flex align-items-center pt-6">
                                    Sinh tố Việt Quất(L)
                                </td>
                                <td class="pt-6">3</td>
                               
                            </tr>
                            @*<tr class="fw-bolder text-gray-700 fs-5 text-end">
                                <td class="d-flex align-items-center">
                                    <i class="fa fa-genderless text-success fs-2 me-2"></i>Logo Design
                                </td>
                                <td>120</td>
                                <td>$40.00</td>
                                <td class="fs-5 text-dark fw-boldest">$4800.00</td>
                            </tr>
                            <tr class="fw-bolder text-gray-700 fs-5 text-end">
                                <td class="d-flex align-items-center">
                                    <i class="fa fa-genderless text-primary fs-2 me-2"></i>Web Development
                                </td>
                                <td>210</td>
                                <td>$60.00</td>
                                <td class="fs-5 text-dark fw-boldest">$12600.00</td>*@
                            @*</tr>*@
                        </tbody>
                    </table>
                    </div>
            </div>
            <div class="d-flex justify-content-center w-100 p-3">
                <button class="btn btn-primary px-2 w-50" onclick="@(() => navigationManager.NavigateTo("/payment"))">Thanh toán</button>
            </div>
            <!--end::Table-->
            <!--begin::Container-->
        </div>
    </div>
</div>

<div class="col-sm-12 col-md-12 d-flex align-items-center justify-content-center justify-content-md-center">
    <div class="dataTables_paginate paging_simple_numbers" id="kt_ecommerce_category_table_paginate">
        <ul class="pagination">
            <li class="paginate_button page-item previous disabled" id="kt_ecommerce_category_table_previous">
                <a href="#" aria-controls="kt_ecommerce_category_table" data-dt-idx="0" tabindex="0" class="page-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox='0 0 8 9' fill='#23B5B5C3' fill-rule='evenodd' clip-rule='evenodd'>
                        <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="black"></rect>
                        <path d="M2.06463 4.42111C1.96161 4.22088 1.9809 3.9637 2.12863 3.78597L5.12847 0.177181C5.31402 -0.046034 5.63049 -0.060261 5.83532 0.145404C6.04015 0.351069 6.05578 0.698744 5.87023 0.921959L3.19406 4.14137L5.84414 7.06417C6.03896 7.27904 6.03835 7.62686 5.84278 7.84105C5.64721 8.05524 5.33073 8.05469 5.13591 7.83982L2.14806 4.54449C2.1141 4.50704 2.08629 4.46541 2.06463 4.42111Z"></path>
                    </svg>
                </a>
            </li>
            <li class="paginate_button page-item active">
                <a href="#" aria-controls="kt_ecommerce_category_table" data-dt-idx="1" tabindex="0" class="page-link">1</a>
            </li>
            <li class="paginate_button page-item "><a href="#" aria-controls="kt_ecommerce_category_table" data-dt-idx="2" tabindex="0" class="page-link">2</a></li>
            <li class="paginate_button page-item next" id="kt_ecommerce_category_table_next">
                <a href="#" aria-controls="kt_ecommerce_category_table" data-dt-idx="3" tabindex="0" class="page-link">
                    <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 9' fill='%235E6278'><path fill-rule='evenodd' clip-rule='evenodd' d='M5.93537 4.57889C6.03839 4.77912 6.0191 5.0363 5.87137 5.21403L2.87153 8.82282C2.68598 9.04603 2.36951 9.06026 2.16468 8.8546C1.95985 8.64893 1.94422 8.30126 2.12977 8.07804L4.80594 4.85863L2.15586 1.93583C1.96104 1.72096 1.96165 1.37314 2.15722 1.15895C2.35279 0.944757 2.66927 0.945311 2.86409 1.16018L5.85194 4.45551C5.8859 4.49296 5.91371 4.53459 5.93537 4.57889Z' /></svg>
                </a>
            </li>
        </ul>
    </div>
</div>



@code {
    public List<Product>? ProductsList = new List<Product>();
	[CascadingParameter] public IModalService Modal { get; set; }
	private string? token;
	public string Name;
	private int pageSize = 10;
	private int pageNumber = 3;
	protected override async  Task OnParametersSetAsync()
	{
		await Get();
		base.OnParametersSet();
	}
	public async Task Get(){
		ProductsList = await productServices.GetProducts(true,  pageSize,  pageNumber);
	}

	public void Change()
	{
		
	}
    public void IncreaseCount()
    {
        
    }
}
